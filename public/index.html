<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset = "UTF-8">
    <title>Ez Collab</title>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <link rel="stylesheet" type="text/css" href="css/default.css">



    <!-- <script src="http://localhost:5000/socket.io/socket.io.js"></script> -->
    <!-- <script src="../socket.io/socket.io.js"></script> -->
    <script src = https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.slim.js></script>


</head>
<body>
        <video class = "video" id="video" src="EZCollabLanding.mp4" autoplay muted loop playsinline></video>
        <canvas class = "canvases" id = "canvas_img"></canvas>
        <canvas class = "canvases" id = "canvas_draw"></canvas>
        <div style="position:absolute;top:12%;left:93%;">Choose Color</div>
        <div class = "colorbuttons" id="green" onclick="getColour(this)"></div>
        <div class = "colorbuttons" id="blue" onclick="getColour(this)"></div>
        <div class = "colorbuttons" id="red" onclick="getColour(this)"></div>
        <div class = "colorbuttons" id="yellow" onclick="getColour(this)"></div>
        <div class = "colorbuttons" id="orange" onclick="getColour(this)"></div>
        <div class = "colorbuttons" id="black" onclick="getColour(this)"></div>
        <div style="position:absolute;top:20%;left:93%;">Current Color</div>
        <div class = "colorbuttons" id="CurrentColour"></div>
        <div style="position:absolute;top:25%;left:93%;">Width</div>
        <div style="position:absolute;top:28.5%;left:93%;width:5px;height:5px;background:black;border:2px solid; border-color: red" id="width7" onclick="setBrushWidth(this)"></div>
        <div style="position:absolute;top:28%;left:94%;width:15px;height:15px;background:black;border:2px solid; border-color: white" id="width17" onclick="setBrushWidth(this)"></div>
        <div style="position:absolute;top:27.5%;left:95.5%;width:25px;height:25px;background:black;border:2px solid; border-color: white" id="width27" onclick="setBrushWidth(this)"></div>
        <div style="position:absolute;top:31%;left:93%;">Eraser</div>
        <div style="position:absolute;top:34.5%;left:93%;width:5px;height:5px;background:white;border:2px solid; border-color: black" id="white7" onclick="getColour(this)"></div>
        <div style="position:absolute;top:34%;left:94%;width:15px;height:15px;background:white;border:2px solid; border-color: black" id="white17" onclick="getColour(this)"></div>
        <div style="position:absolute;top:33.5%;left:95.5%;width:25px;height:25px;background:white;border:2px solid; border-color: black" id="white27" onclick="getColour(this)"></div>
        <input type="button" value="Global Undo (0)" id="GlobalUndo" size="23" onclick="request_global_undo()" style="position:absolute;top:38%;right:2.5%;" disabled>
        <div style="position:absolute;top:45%;right:2.5%;" id = "total_users">Total Drawers: 0</div>
        <input type="button" value="save" id="save" size="30" onclick="save()" style="position:absolute;top:55%;right:6%;">
        <input type="button" value="clear" id="clear" size="23" onclick="erase()" style="position:absolute;top:55%;right:2.5%;">
        <input type="button" value="Stream!" id="Stream" size="23" onclick="start_streaming()" style="position:absolute;top:60%;right:7%;">
        <input type="button" value="Stop Stream!!" id="StopStream" size="23" onclick="stop_stream()" style="position:absolute;top:60%;right:1%;" disabled>
        <input type="button" value="Freeze Stream!" id="FreezeStream" size="23" onclick="freeze_stream()" style="position:absolute;top:70%;right:6%;" disabled>
        <input type="button" value="UnFreeze!" id="UnFreeze" size="23" onclick="unfreeze_stream()" style="position:absolute;top:70%;right:1%;" disabled>

        <img id = "CountryFlag" src = "EmptyCountryFlag.png" alt = "CountryFlagWrong.png" style="position:absolute;top:77%;left:89.75%;width:150px;height:100px">
        <input type="button" value="Generate Flag!" id="GenerateFlagButton" size="23" onclick="sendCountryFlag()" style="position:absolute;top:89%;right:3.5%;">

        <script>
            console.log("Attempting to Connect");
            // var socket = io.connect("http://localhost:5000");
            // var socket = io.connect("http://ec2-3-92-177-98.compute-1.amazonaws.com:5000/");
            // var socket = io.connect("http://ezcollab.lidarren.me");
            var socket = io ();
            console.log("Connected Socket from Client Side!");
                
            socket.on('getCount', function(total_users){
                document.getElementById("total_users").innerHTML = "Total Drawers: ".concat(total_users);
                console.log("User Connected/Disconnected!");
            });
            
        </script>

        <script language="JavaScript" src="http://www.geoplugin.net/javascript.gp" type="text/javascript"></script>
        <script src="https://webrtc.github.io/adapter/adapter-latest.js"></script>
        <script src="canvas.js"></script>
        <script src="stream_broadcaster.js"></script>
        <script src="stream_watcher.js"></script>

</body>
</html>